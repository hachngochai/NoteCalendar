"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var calendarDays=document.getElementById("calendar-days"),dayName=document.getElementById("day-name"),monthYear=document.getElementById("month-year"),eventTitle=document.getElementById("eventTitle"),eventTime=document.getElementById("eventTime"),eventLocation=document.getElementById("eventLocation"),eventNote=document.getElementById("eventNote"),eventDateText=document.getElementById("eventDateText"),resetBtn=document.getElementById("resetModeBtn"),resetModal=document.getElementById("resetModal"),confirmReset=document.getElementById("confirmReset"),cancelReset=document.getElementById("cancelReset"),today=new Date,viewYear=today.getFullYear(),viewMonth=today.getMonth(),selectedDateKey=null,resetMode=!1,weekDaysVN=["Chủ Nhật","Thứ Hai","Thứ Ba","Thứ Tư","Thứ Năm","Thứ Sáu","Thứ Bảy"],monthsVN=["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],events=JSON.parse(localStorage.getItem("tetEvents"))||{};function renderCalendar(a,o){calendarDays.innerHTML="";var e=new Date(o,a,1).getDay(),t=new Date(o,a+1,0).getDate();monthYear.textContent="".concat(monthsVN[a]," năm ").concat(o),dayName.textContent="".concat(weekDaysVN[today.getDay()],", ngày ").concat(today.getDate());for(var n=0===e?6:e-1,c=document.createElement("div"),r=0;r<n;r++)c.appendChild(document.createElement("span"));for(var i=function(e){7===c.children.length&&(calendarDays.appendChild(c),c=document.createElement("div"));var t=document.createElement("span");(t.textContent=e)===today.getDate()&&a===today.getMonth()&&o===today.getFullYear()&&t.classList.add("active");var n="".concat(o,"-").concat(a+1,"-").concat(e);events[n]&&t.classList.add("event"),t.onclick=function(){if(resetMode){if(!events[n])return;return delete events[n],localStorage.setItem("tetEvents",JSON.stringify(events)),void renderCalendar(viewMonth,viewYear)}openEventForm(o,a,e)},c.appendChild(t)},l=1;l<=t;l++)i(l);for(;c.children.length<7;)c.appendChild(document.createElement("span"));calendarDays.appendChild(c)}function openEventForm(e,t,n){selectedDateKey="".concat(e,"-").concat(t+1,"-").concat(n);var a=new Date(e,t,n);eventDateText.textContent="".concat(n,"/").concat(t+1,"/").concat(e," (").concat(weekDaysVN[a.getDay()],")");var o=events[selectedDateKey]||{};eventTitle.value=o.title||"",eventTime.value=o.time||"",eventLocation.value=o.location||"",eventNote.value=o.note||"",document.querySelector(".calendar").classList.add("flip")}function animateCalendar(e){calendarDays.classList.remove("slide-left","slide-right"),calendarDays.offsetWidth,calendarDays.classList.add("next"===e?"slide-left":"slide-right")}document.getElementById("saveEvent").onclick=function(){selectedDateKey&&(events[selectedDateKey]={title:eventTitle.value.trim(),time:eventTime.value,location:eventLocation.value.trim(),note:eventNote.value.trim()},localStorage.setItem("tetEvents",JSON.stringify(events)),document.querySelector(".calendar").classList.remove("flip"),renderCalendar(viewMonth,viewYear))},document.getElementById("cancelEvent").onclick=function(){document.querySelector(".calendar").classList.remove("flip")},resetBtn.onclick=function(){resetModal.classList.remove("hidden")},confirmReset.onclick=function(){resetMode=!0,resetModal.classList.add("hidden")},cancelReset.onclick=function(){resetMode=!1,resetModal.classList.add("hidden")},document.getElementById("prev").onclick=function(){animateCalendar("prev"),setTimeout(function(){--viewMonth<0&&(viewMonth=11,viewYear--),renderCalendar(viewMonth,viewYear)},220)},document.getElementById("next").onclick=function(){animateCalendar("next"),setTimeout(function(){11<++viewMonth&&(viewMonth=0,viewYear++),renderCalendar(viewMonth,viewYear)},220)},renderCalendar(viewMonth,viewYear);var W,H,canvas=document.getElementById("fireworks"),ctx=canvas.getContext("2d");function resizeFireworks(){W=canvas.width=window.innerWidth,H=canvas.height=window.innerHeight}window.addEventListener("resize",resizeFireworks),resizeFireworks();var GRAVITY=.06,FIREWORK_Y=.32*H,fireworks=[],particles=[],Firework=function(){function t(e){_classCallCheck(this,t),this.x=e,this.y=H,this.vy=-(7+3*Math.random()),this.color=randomColor(),this.exploded=!1}return _createClass(t,[{key:"update",value:function(){this.y+=this.vy,this.y<=FIREWORK_Y&&(this.explode(),this.exploded=!0)}},{key:"draw",value:function(){ctx.fillStyle=this.color,ctx.fillRect(this.x,this.y,2,12)}},{key:"explode",value:function(){for(var e=60+40*Math.random(),t=0;t<e;t++)particles.push(new Particle(this.x,this.y,this.color))}}]),t}(),Particle=function(){function c(e,t,n){_classCallCheck(this,c);var a=Math.random()*Math.PI*2,o=5*Math.random()+2;this.x=e,this.y=t,this.vx=Math.cos(a)*o,this.vy=Math.sin(a)*o,this.alpha=1,this.size=2*Math.random()+1,this.color=n}return _createClass(c,[{key:"update",value:function(){this.vy+=GRAVITY,this.x+=this.vx,this.y+=this.vy,this.alpha-=.015}},{key:"draw",value:function(){ctx.save(),ctx.globalAlpha=this.alpha,ctx.fillStyle=this.color,ctx.beginPath(),ctx.arc(this.x,this.y,this.size,0,2*Math.PI),ctx.fill(),ctx.restore()}}]),c}();function randomColor(){var e=["#FFD700","#FF3D00","#FF9100","#F50057","#00E5FF","#76FF03","#FFEA00"];return e[Math.floor(Math.random()*e.length)]}function animateFireworks(){ctx.clearRect(0,0,W,H),fireworks=fireworks.filter(function(e){return!e.exploded}),particles=particles.filter(function(e){return 0<e.alpha}),fireworks.forEach(function(e){e.update(),e.draw()}),particles.forEach(function(e){e.update(),e.draw()}),requestAnimationFrame(animateFireworks)}animateFireworks(),setInterval(function(){var e=.78*W;fireworks.push(new Firework(e+(140*Math.random()-70)))},1500);var themeModal=document.getElementById("themeModal"),openTheme=document.getElementById("openTheme"),closeTheme=document.getElementById("closeTheme"),applyThemeBtn=document.getElementById("applyTheme"),bgInput=document.getElementById("theme-bg"),textInput=document.getElementById("theme-text"),accentInput=document.getElementById("theme-accent");function setTheme(e){e.bg&&document.documentElement.style.setProperty("--calendar-bg",e.bg),e.text&&document.documentElement.style.setProperty("--calendar-text",e.text),e.accent&&document.documentElement.style.setProperty("--calendar-accent",e.accent)}openTheme.onclick=function(){return themeModal.classList.remove("hidden")},closeTheme.onclick=function(){return themeModal.classList.add("hidden")},applyThemeBtn.onclick=function(){var e={bg:bgInput.value,text:textInput.value,accent:accentInput.value};setTheme(e),localStorage.setItem("calendarTheme",JSON.stringify(e)),themeModal.classList.add("hidden")};var savedTheme=JSON.parse(localStorage.getItem("calendarTheme"));savedTheme&&setTheme(savedTheme);var resetThemeBtn=document.getElementById("resetTheme"),DEFAULT_THEME={bg:"#a12424",text:"#fff8e1",accent:"#ffd54f"};resetThemeBtn.onclick=function(){setTheme(DEFAULT_THEME),localStorage.removeItem("calendarTheme"),bgInput.value=DEFAULT_THEME.bg,textInput.value=DEFAULT_THEME.text,accentInput.value=DEFAULT_THEME.accent};var timePicker=document.getElementById("timePicker"),pickMonth=document.getElementById("pickMonth"),pickYear=document.getElementById("pickYear");function openTimePicker(){pickMonth.innerHTML="",pickYear.innerHTML="",monthsVN.forEach(function(e,t){var n=document.createElement("option");n.value=t,n.textContent=e,t===viewMonth&&(n.selected=!0),pickMonth.appendChild(n)});for(var e=today.getFullYear(),t=e-20;t<=e+20;t++){var n=document.createElement("option");n.value=t,(n.textContent=t)===viewYear&&(n.selected=!0),pickYear.appendChild(n)}timePicker.classList.remove("hidden")}function goToDate(e,t){viewYear=e,viewMonth=t,animateCalendar("next"),renderCalendar(viewMonth,viewYear)}monthYear.style.cursor="pointer",monthYear.onclick=function(){openTimePicker()},document.getElementById("goTime").onclick=function(){var e=parseInt(document.getElementById("pickYear").value),t=parseInt(document.getElementById("pickMonth").value);if(!isNaN(e)&&!isNaN(t)){var n=document.querySelector(".calendar");n.classList.remove("year-jump"),n.offsetWidth,n.classList.add("year-jump"),setTimeout(function(){goToDate(e,t)},180),document.getElementById("timeModal").classList.add("hidden")}},document.getElementById("closeTime").onclick=function(){timePicker.classList.add("hidden")},timePicker.onclick=function(e){e.target===timePicker&&timePicker.classList.add("hidden")};var horseImg=document.getElementById("tetHorse"),horsePicker=document.getElementById("horsePicker"),changeHorseBtn=document.getElementById("changeHorseBtn"),savedHorse=localStorage.getItem("tetHorseImage");savedHorse&&(horseImg.src=savedHorse),changeHorseBtn.onclick=function(){horsePicker.click()},horsePicker.onchange=function(){var e=horsePicker.files[0];if(e)if(e.type.startsWith("image/")){var t=new FileReader;t.onload=function(){horseImg.src=t.result,localStorage.setItem("tetHorseImage",t.result)},t.readAsDataURL(e)}else alert("Vui lòng chọn file ảnh")};
//# sourceMappingURL=main.min.js.map
