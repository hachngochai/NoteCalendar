{"version":3,"sources":["main.js"],"names":["calendarDays","document","getElementById","dayName","monthYear","eventTitle","eventTime","eventLocation","eventNote","resetBtn","resetModal","today","confirmReset","cancelReset","Date","selectedDateKey","monthsVN","weekDaysVN","localStorage","events","renderCalendar","month","getItem","daysInMonth","year","textContent","startIndex","firstDay","row","createElement","getDate","concat","appendChild","getDay","i","span","length","dateKey","onclick","d","getMonth","getFullYear","classList","add","openEventForm","resetMode","setItem","JSON","stringify","viewMonth","viewYear","_loop","children","eventDateText","location","data","day","dateObj","title","value","time","querySelector","animateCalendar","direction","remove","offsetWidth","trim","note","setTimeout","getContext","canvas","innerWidth","W","H","particles","ctx","resizeFireworks","width","window","height","innerHeight","addEventListener","GRAVITY","FIREWORK_Y","fireworks","Firework","x","_classCallCheck","this","y","vy","explode","Math","random","color","exploded","fillStyle","fillRect","count","push","Particle","angle","PI","speed","cos","vx","alpha","size","save","globalAlpha","beginPath","randomColor","colors","floor","clearRect","filter","fw","p","forEach","update","draw","requestAnimationFrame","animateFireworks","setInterval","baseX","spread","bgInput","textInput","accentInput","applyThemeBtn","openTheme","themeModal","setTheme","theme","bg","documentElement","setProperty","text","accent","style","closeTheme","savedTheme","parse","resetThemeBtn","DEFAULT_THEME","timePicker","openTimePicker","opt","m","currentYear","selected","pickMonth","pickYear","goToDate","isNaN","cursor","innerHTML","parseInt","cal","horsePicker","changeHorseBtn","savedHorse","e","target","horseImg","src","onchange","type","startsWith","alert","click","FileReader","file","files","reader","onload","result","readAsDataURL"],"mappings":"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","file":"main.min.js","sourcesContent":["/* ===== DOM ===== */\r\nconst calendarDays = document.getElementById(\"calendar-days\");\r\nconst dayName = document.getElementById(\"day-name\");\r\nconst monthYear = document.getElementById(\"month-year\");\r\n\r\nconst eventTitle = document.getElementById(\"eventTitle\");\r\nconst eventTime = document.getElementById(\"eventTime\");\r\nconst eventLocation = document.getElementById(\"eventLocation\");\r\nconst eventNote = document.getElementById(\"eventNote\");\r\nconst eventDateText = document.getElementById(\"eventDateText\");\r\n\r\nconst resetBtn = document.getElementById(\"resetModeBtn\");\r\nconst resetModal = document.getElementById(\"resetModal\");\r\nconst confirmReset = document.getElementById(\"confirmReset\");\r\nconst cancelReset = document.getElementById(\"cancelReset\");\r\n\r\n/* ===== TIME ===== */\r\nconst today = new Date();\r\nlet viewYear = today.getFullYear();\r\nlet viewMonth = today.getMonth();\r\nlet selectedDateKey = null;\r\n\r\n/* ===== RESET MODE ===== */\r\nlet resetMode = false;\r\n\r\n/* ===== DATA ===== */\r\nconst weekDaysVN = [\r\n  \"Chủ Nhật\",\"Thứ Hai\",\"Thứ Ba\",\r\n  \"Thứ Tư\",\"Thứ Năm\",\"Thứ Sáu\",\"Thứ Bảy\"\r\n];\r\n\r\nconst monthsVN = [\r\n  \"Tháng 1\",\"Tháng 2\",\"Tháng 3\",\"Tháng 4\",\r\n  \"Tháng 5\",\"Tháng 6\",\"Tháng 7\",\"Tháng 8\",\r\n  \"Tháng 9\",\"Tháng 10\",\"Tháng 11\",\"Tháng 12\"\r\n];\r\n\r\nlet events = JSON.parse(localStorage.getItem(\"tetEvents\")) || {};\r\n\r\n/* ===== RENDER CALENDAR ===== */\r\nfunction renderCalendar(month, year) {\r\n  calendarDays.innerHTML = \"\";\r\n\r\n  const firstDay = new Date(year, month, 1).getDay();\r\n  const daysInMonth = new Date(year, month + 1, 0).getDate();\r\n\r\n  monthYear.textContent = `${monthsVN[month]} năm ${year}`;\r\n  dayName.textContent = `${weekDaysVN[today.getDay()]}, ngày ${today.getDate()}`;\r\n\r\n  let startIndex = firstDay === 0 ? 6 : firstDay - 1;\r\n  let row = document.createElement(\"div\");\r\n\r\n  for (let i = 0; i < startIndex; i++) {\r\n    row.appendChild(document.createElement(\"span\"));\r\n  }\r\n\r\n  for (let d = 1; d <= daysInMonth; d++) {\r\n    if (row.children.length === 7) {\r\n      calendarDays.appendChild(row);\r\n      row = document.createElement(\"div\");\r\n    }\r\n\r\n    const span = document.createElement(\"span\");\r\n    span.textContent = d;\r\n\r\n    if (\r\n      d === today.getDate() &&\r\n      month === today.getMonth() &&\r\n      year === today.getFullYear()\r\n    ) span.classList.add(\"active\");\r\n\r\n    const dateKey = `${year}-${month + 1}-${d}`;\r\n    if (events[dateKey]) span.classList.add(\"event\");\r\n\r\n    span.onclick = () => {\r\n      if (resetMode) {\r\n        if (!events[dateKey]) return;\r\n\r\n        delete events[dateKey];\r\n        localStorage.setItem(\"tetEvents\", JSON.stringify(events));\r\n        renderCalendar(viewMonth, viewYear);\r\n        return;\r\n      }\r\n      openEventForm(year, month, d);\r\n    };\r\n\r\n    row.appendChild(span);\r\n  }\r\n\r\n  while (row.children.length < 7) {\r\n    row.appendChild(document.createElement(\"span\"));\r\n  }\r\n\r\n  calendarDays.appendChild(row);\r\n}\r\n\r\n/* ===== OPEN FORM ===== */\r\nfunction openEventForm(year, month, day) {\r\n  selectedDateKey = `${year}-${month + 1}-${day}`;\r\n\r\n  const dateObj = new Date(year, month, day);\r\n  eventDateText.textContent =\r\n    `${day}/${month + 1}/${year} (${weekDaysVN[dateObj.getDay()]})`;\r\n\r\n  const data = events[selectedDateKey] || {};\r\n\r\n  eventTitle.value = data.title || \"\";\r\n  eventTime.value = data.time || \"\";\r\n  eventLocation.value = data.location || \"\";\r\n  eventNote.value = data.note || \"\";\r\n\r\n  document.querySelector(\".calendar\").classList.add(\"flip\");\r\n}\r\n\r\n/* ===== SAVE EVENT ===== */\r\ndocument.getElementById(\"saveEvent\").onclick = () => {\r\n  if (!selectedDateKey) return;\r\n\r\n  events[selectedDateKey] = {\r\n    title: eventTitle.value.trim(),\r\n    time: eventTime.value,\r\n    location: eventLocation.value.trim(),\r\n    note: eventNote.value.trim()\r\n  };\r\n\r\n  localStorage.setItem(\"tetEvents\", JSON.stringify(events));\r\n  document.querySelector(\".calendar\").classList.remove(\"flip\");\r\n  renderCalendar(viewMonth, viewYear);\r\n};\r\n\r\n/* ===== CANCEL ===== */\r\ndocument.getElementById(\"cancelEvent\").onclick = () => {\r\n  document.querySelector(\".calendar\").classList.remove(\"flip\");\r\n};\r\n\r\n/* ===== RESET BUTTON ===== */\r\nresetBtn.onclick = () => {\r\n  resetModal.classList.remove(\"hidden\");\r\n};\r\n\r\nconfirmReset.onclick = () => {\r\n  resetMode = true;\r\n  resetModal.classList.add(\"hidden\");\r\n};\r\n\r\ncancelReset.onclick = () => {\r\n  resetMode = false;\r\n  resetModal.classList.add(\"hidden\");\r\n};\r\n\r\n\r\n/* ===== NAVIGATION ===== */\r\nfunction animateCalendar(direction) {\r\n  calendarDays.classList.remove(\"slide-left\", \"slide-right\");\r\n\r\n  // force reflow để reset animation\r\n  void calendarDays.offsetWidth;\r\n\r\n  calendarDays.classList.add(\r\n    direction === \"next\" ? \"slide-left\" : \"slide-right\"\r\n  );\r\n}\r\n\r\ndocument.getElementById(\"prev\").onclick = () => {\r\n  animateCalendar(\"prev\");\r\n\r\n  setTimeout(() => {\r\n    viewMonth--;\r\n    if (viewMonth < 0) {\r\n      viewMonth = 11;\r\n      viewYear--;\r\n    }\r\n    renderCalendar(viewMonth, viewYear);\r\n  }, 220); // ⏱ đúng với CSS animation\r\n};\r\n\r\n\r\ndocument.getElementById(\"next\").onclick = () => {\r\n  animateCalendar(\"next\");\r\n\r\n  setTimeout(() => {\r\n    viewMonth++;\r\n    if (viewMonth > 11) {\r\n      viewMonth = 0;\r\n      viewYear++;\r\n    }\r\n    renderCalendar(viewMonth, viewYear);\r\n  }, 220);\r\n};\r\n\r\n\r\n/* ===== INIT ===== */\r\nrenderCalendar(viewMonth, viewYear);\r\n\r\n/* ================= FIREWORK ENGINE (RESTORED) ================= */\r\nconst canvas = document.getElementById(\"fireworks\");\r\nconst ctx = canvas.getContext(\"2d\");\r\n\r\nlet W, H;\r\nfunction resizeFireworks() {\r\n  W = canvas.width = window.innerWidth;\r\n  H = canvas.height = window.innerHeight;\r\n}\r\nwindow.addEventListener(\"resize\", resizeFireworks);\r\nresizeFireworks();\r\n\r\nconst GRAVITY = 0.06;\r\nconst FIREWORK_Y = H * 0.32;\r\n\r\nlet fireworks = [];\r\nlet particles = [];\r\n\r\nclass Firework {\r\n  constructor(x) {\r\n    this.x = x;\r\n    this.y = H;\r\n    this.vy = -(7 + Math.random() * 3);\r\n    this.color = randomColor();\r\n    this.exploded = false;\r\n  }\r\n\r\n  update() {\r\n    this.y += this.vy;\r\n    if (this.y <= FIREWORK_Y) {\r\n      this.explode();\r\n      this.exploded = true;\r\n    }\r\n  }\r\n\r\n  draw() {\r\n    ctx.fillStyle = this.color;\r\n    ctx.fillRect(this.x, this.y, 2, 12);\r\n  }\r\n\r\n  explode() {\r\n    const count = 60 + Math.random() * 40;\r\n    for (let i = 0; i < count; i++) {\r\n      particles.push(new Particle(this.x, this.y, this.color));\r\n    }\r\n  }\r\n}\r\n\r\nclass Particle {\r\n  constructor(x, y, color) {\r\n    const angle = Math.random() * Math.PI * 2;\r\n    const speed = Math.random() * 5 + 2;\r\n\r\n    this.x = x;\r\n    this.y = y;\r\n    this.vx = Math.cos(angle) * speed;\r\n    this.vy = Math.sin(angle) * speed;\r\n    this.alpha = 1;\r\n    this.size = Math.random() * 2 + 1;\r\n    this.color = color;\r\n  }\r\n\r\n  update() {\r\n    this.vy += GRAVITY;\r\n    this.x += this.vx;\r\n    this.y += this.vy;\r\n    this.alpha -= 0.015;\r\n  }\r\n\r\n  draw() {\r\n    ctx.save();\r\n    ctx.globalAlpha = this.alpha;\r\n    ctx.fillStyle = this.color;\r\n    ctx.beginPath();\r\n    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);\r\n    ctx.fill();\r\n    ctx.restore();\r\n  }\r\n}\r\n\r\nfunction randomColor() {\r\n  const colors = [\r\n    \"#FFD700\",\r\n    \"#FF3D00\",\r\n    \"#FF9100\",\r\n    \"#F50057\",\r\n    \"#00E5FF\",\r\n    \"#76FF03\",\r\n    \"#FFEA00\"\r\n  ];\r\n  return colors[Math.floor(Math.random() * colors.length)];\r\n}\r\n\r\nfunction animateFireworks() {\r\n  ctx.clearRect(0, 0, W, H);\r\n\r\n  fireworks = fireworks.filter(fw => !fw.exploded);\r\n  particles = particles.filter(p => p.alpha > 0);\r\n\r\n  fireworks.forEach(fw => {\r\n    fw.update();\r\n    fw.draw();\r\n  });\r\n\r\n  particles.forEach(p => {\r\n    p.update();\r\n    p.draw();\r\n  });\r\n\r\n  requestAnimationFrame(animateFireworks);\r\n}\r\nanimateFireworks();\r\n\r\n/* ===== AUTO FIRE – LỆCH PHẢI ===== */\r\nsetInterval(() => {\r\n  const baseX = W * 0.78;\r\n  const spread = 140;\r\n  fireworks.push(\r\n    new Firework(baseX + (Math.random() * spread - spread / 2))\r\n  );\r\n}, 1500);\r\n\r\n\r\n\r\n/* ================= THEME SYSTEM (STEP 1) ================= */\r\nconst themeModal = document.getElementById(\"themeModal\");\r\nconst openTheme = document.getElementById(\"openTheme\");\r\nconst closeTheme = document.getElementById(\"closeTheme\");\r\nconst applyThemeBtn = document.getElementById(\"applyTheme\");\r\n\r\nconst bgInput = document.getElementById(\"theme-bg\");\r\nconst textInput = document.getElementById(\"theme-text\");\r\nconst accentInput = document.getElementById(\"theme-accent\");\r\n\r\n/* open / close */\r\nopenTheme.onclick = () => themeModal.classList.remove(\"hidden\");\r\ncloseTheme.onclick = () => themeModal.classList.add(\"hidden\");\r\n\r\n/* apply */\r\napplyThemeBtn.onclick = () => {\r\n  const theme = {\r\n    bg: bgInput.value,\r\n    text: textInput.value,\r\n    accent: accentInput.value\r\n  };\r\n\r\n  setTheme(theme);\r\n  localStorage.setItem(\"calendarTheme\", JSON.stringify(theme));\r\n  themeModal.classList.add(\"hidden\");\r\n};\r\n\r\n/* apply theme to css variables */\r\nfunction setTheme(theme) {\r\n  if (theme.bg)\r\n    document.documentElement.style.setProperty(\"--calendar-bg\", theme.bg);\r\n  if (theme.text)\r\n    document.documentElement.style.setProperty(\"--calendar-text\", theme.text);\r\n  if (theme.accent)\r\n    document.documentElement.style.setProperty(\"--calendar-accent\", theme.accent);\r\n}\r\n\r\n/* load saved theme */\r\nconst savedTheme = JSON.parse(localStorage.getItem(\"calendarTheme\"));\r\nif (savedTheme) setTheme(savedTheme);\r\n\r\nconst resetThemeBtn = document.getElementById(\"resetTheme\");\r\nconst DEFAULT_THEME = {\r\n  bg: \"#a12424\",\r\n  text: \"#fff8e1\",\r\n  accent: \"#ffd54f\"\r\n};\r\n\r\nresetThemeBtn.onclick = () => {\r\n  // reset CSS variables\r\n  setTheme(DEFAULT_THEME);\r\n\r\n  // xoá theme custom đã lưu\r\n  localStorage.removeItem(\"calendarTheme\");\r\n\r\n  // set lại color picker cho đúng màu mặc định\r\n  bgInput.value = DEFAULT_THEME.bg;\r\n  textInput.value = DEFAULT_THEME.text;\r\n  accentInput.value = DEFAULT_THEME.accent;\r\n};\r\n\r\nconst timePicker = document.getElementById(\"timePicker\");\r\nconst pickMonth = document.getElementById(\"pickMonth\");\r\nconst pickYear = document.getElementById(\"pickYear\");\r\n\r\nmonthYear.style.cursor = \"pointer\";\r\n\r\nmonthYear.onclick = () => {\r\n  openTimePicker();\r\n};\r\n\r\nfunction openTimePicker() {\r\n  pickMonth.innerHTML = \"\";\r\n  pickYear.innerHTML = \"\";\r\n\r\n  // tháng\r\n  monthsVN.forEach((m, i) => {\r\n    const opt = document.createElement(\"option\");\r\n    opt.value = i;\r\n    opt.textContent = m;\r\n    if (i === viewMonth) opt.selected = true;\r\n    pickMonth.appendChild(opt);\r\n  });\r\n\r\n  // năm (±20 năm)\r\n  const currentYear = today.getFullYear();\r\n  for (let y = currentYear - 20; y <= currentYear + 20; y++) {\r\n    const opt = document.createElement(\"option\");\r\n    opt.value = y;\r\n    opt.textContent = y;\r\n    if (y === viewYear) opt.selected = true;\r\n    pickYear.appendChild(opt);\r\n  }\r\n\r\n  timePicker.classList.remove(\"hidden\");\r\n}\r\n\r\nfunction goToDate(year, month) {\r\n  viewYear = year;\r\n  viewMonth = month;\r\n\r\n  // animation chuyển cảnh theo hướng \"nhảy\"\r\n  animateCalendar(\"next\");\r\n\r\n  renderCalendar(viewMonth, viewYear);\r\n}\r\n\r\ndocument.getElementById(\"goTime\").onclick = () => {\r\n  const y = parseInt(document.getElementById(\"pickYear\").value);\r\n  const m = parseInt(document.getElementById(\"pickMonth\").value);\r\n\r\n  if (isNaN(y) || isNaN(m)) return;\r\n\r\n  const cal = document.querySelector(\".calendar\");\r\n\r\n  // reset animation nếu spam click\r\n  cal.classList.remove(\"year-jump\");\r\n  void cal.offsetWidth; // force reflow\r\n\r\n  // thêm hiệu ứng rung + ripple\r\n  cal.classList.add(\"year-jump\");\r\n\r\n  // delay nhẹ cho cảm giác \"nhảy năm\"\r\n  setTimeout(() => {\r\n    goToDate(y, m); // JS month bắt đầu từ 0\r\n  }, 180);\r\n\r\n  document.getElementById(\"timeModal\").classList.add(\"hidden\");\r\n};\r\n\r\ndocument.getElementById(\"closeTime\").onclick = () => {\r\n  timePicker.classList.add(\"hidden\");\r\n};\r\n\r\ntimePicker.onclick = (e) => {\r\n  if (e.target === timePicker) {\r\n    timePicker.classList.add(\"hidden\");\r\n  }\r\n};\r\n\r\n/* ===== CUSTOM TET IMAGE ===== */\r\nconst horseImg = document.getElementById(\"tetHorse\");\r\nconst horsePicker = document.getElementById(\"horsePicker\");\r\nconst changeHorseBtn = document.getElementById(\"changeHorseBtn\");\r\n\r\n/* load ảnh đã lưu */\r\nconst savedHorse = localStorage.getItem(\"tetHorseImage\");\r\nif (savedHorse) {\r\n  horseImg.src = savedHorse;\r\n}\r\n\r\n/* click nút → mở file picker */\r\nchangeHorseBtn.onclick = () => {\r\n  horsePicker.click();\r\n};\r\n\r\n/* khi chọn ảnh */\r\nhorsePicker.onchange = () => {\r\n  const file = horsePicker.files[0];\r\n  if (!file) return;\r\n\r\n  if (!file.type.startsWith(\"image/\")) {\r\n    alert(\"Vui lòng chọn file ảnh\");\r\n    return;\r\n  }\r\n\r\n  const reader = new FileReader();\r\n  reader.onload = () => {\r\n    horseImg.src = reader.result;\r\n    localStorage.setItem(\"tetHorseImage\", reader.result);\r\n  };\r\n  reader.readAsDataURL(file);\r\n};\r\n\r\n// function resetHorse() {\r\n//   horseImg.src = \"horse.png\";\r\n//   localStorage.removeItem(\"tetHorseImage\");\r\n// }\r\n\r\n"]}